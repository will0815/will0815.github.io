---
layout: post
title: Linux学习笔记1-文件安全与权限
category: Linux
date: 2015-01-23
share: true
duoshuo: true
---
#文件安全与权限
包含内容：  
• 文件和目录的权限。  
• setuid。  
• chown和chgrp。  
• umask。  
• 符号链接。  

创建文件时系统保存文件的有关信息包括：  
1、长度  
2、类型  
3、位置  
4、所属用户以及哪些用户可以访问  
5、i节点  
6、修改时间 （-rwxr-xr-x：分别表示文件所有者、同组、以及其他用户对该文件的权限）  

文件类型: 如上权限位-rwxr-xr-x 其中最前面的横杠即表示该文件的类型（这里为普通文件）  
文件类型分为：  
d 目录  
l 符号链接。  
s 套接字文件  
b 块设备文件  
c 字符设备文件  
p 命名管道文件  

**更改文件权限位命令：chmod** 
chmod [who] operator [permission] filename  
who:  
u 文件所有者  
g 同组用户  
o 其他用户  
a 所有用户  
operator：  
+ 增加权限  
- 取消权限  
= 设定权限  
permission：  
r 读  
w 写  
x 执行  
s 文件所有者和组set-ID  
t 粘性位*  
l 给文件加锁 是其他用户无法访问  
u  

chmod命令的绝对模式  
chmod [mode] file  
如： chmod -R 755 myfile  
755 分别对应文件所有者、同组、以及其他用户对该文件的权限  
7：rwx(4+2+1)  
5: rx(4+1)  
-R 表示如果是目录及将对应操作应用于每一个子目录及文件  

目录与文件  
目录权限中  
r：列出目录内容  
w: 创建文件  
x: 搜索和访问  
如果一个目录只有执行（x）权限，但目录中有个可执行程序，只要用户知道它的路径仍然可以执行，此时用户不能进入目录但可以执行其中的程序
目录的权限将会覆盖目录中文件的权限   

chown和chgrp  
当你创建一个文件时，你就是该文件的属主。一旦你拥有某个文件，就可以改变它的所  
有权，把它的所有权交给另外一个/etc/passwd文件中存在的合法用户。可以使用用户名或用  
户ID号来完成这一操作。在改变一个文件的所有权时，相应的suid也将被清除，这是出于安  
全性的考虑。只有文件的属主和系统管理员可以改变文件的所有权。一旦将文件的所有权交  
给另外一个用户，就无法再重新收回它的所有权。如果真的需要这样做，那么就只有求助于  
系统管理员了。  
chown命令的一般形式为：  
chmod -R -h owner file  
-R选项意味着对所有子目录下的文件也都进行同样的操作。-h选项意味着在改变符号链  
接文件的属主时不影响该链接所指向的目标文件。  
chgrp与chown类似  

umask  
umask命令确定创建文件的缺省模式。系统管理员必须要为你设置一个合理的umask值，以确保你创建的  
文件具有所希望的缺省权限，防止其他非同组用户对你的文件具有写权限。
在已经登录之后，可以按照个人的偏好使用umask命令来改变文件创建的缺省权限。相应  
的改变直到退出该shell或使用另外的umask命令之前一直有效。
一般来说,umask命令是在/etc/profile文件中设置的，每个用户在登录时都会引用这个文件，所以如果希望改变所有用户的umask，可以在该文件中加入相应的条目。如果希望永久性地设置自己的umask值，那么就把它放在自己$HOME目录下的.profile文件中。  
  
符号链接  
两种不同类型的链接：软链接（指向文件的指针)/硬链接  
软链接可以理解为windows中的快捷方式   
该命令的一般形式为：   
ln [-s] source_path target_path   
其中的路径可以是目录也可以是文件。    


